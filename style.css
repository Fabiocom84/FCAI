/* ==========================================================================
   Segretario AI - Foglio di Stile Principale
   ==========================================================================
   Struttura del file:
   1. STILI GLOBALI E FONDAMENTALI      (body, animazioni, tipografia di base)
   2. LAYOUT PRINCIPALE DELLA PAGINA    (wrapper per login e index)
   3. COMPONENTI COMUNI                 (pulsanti, form, legenda, etc.)
   4. STILI PER I MODALI                (regole generiche e specifiche per modale)
      4.1 Stili Generici per Tutti i Modali
      4.2 Stili Specifici per Colore Header
      4.3 Stili Specifici: Chat Modal (#chatModal)
   5. COMPONENTI SPECIFICI DI PAGINA    (es. ultimi inserimenti)
   6. MEDIA QUERIES (RESPONSIVE DESIGN) (adattamenti per mobile)
   ========================================================================== */

/* ============================================= */
/* == 1. STILI GLOBALI E FONDAMENTALI         == */
/* ============================================= */

/* Impostazioni base per l'intero documento */
body {
    font-family: 'Roboto', sans-serif;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative; /* Necessario per i pseudo-elementi di sfondo */
    background-color: #f0f2f5;
}

/* Pseudo-elemento per l'immagine di sfondo sfocata */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('img/logo.png');
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
    background-attachment: fixed;
    filter: blur(8px);
    -webkit-filter: blur(8px);
    transform: scale(1.05);
    z-index: -2;
}

/* Overlay bianco semi-trasparente sopra l'immagine sfocata */
body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.6);
    z-index: -1;
}

/* Animazioni globali */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeInModal {
    from { opacity: 0; transform: translate(-50%, -60%); }
    to { opacity: 1; transform: translate(-50%, -50%); }
}

/* Tipografia di base */
h1 {
    font-family: 'Roboto', sans-serif;
    font-weight: 700;
    font-size: 2.2em;
    color: #2A76B8;
    margin-bottom: 0;
    text-transform: uppercase;
    letter-spacing: 2px;
}

h2 {
    font-family: 'Roboto', sans-serif;
    font-weight: 500;
    color: #333333;
    margin-bottom: 15px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* ============================================= */
/* == 2. LAYOUT PRINCIPALE DELLA PAGINA       == */
/* ============================================= */

/* Contenitore per la pagina di login (questo rimane un pannello) */
.login-container {
    background-color: rgba(255, 255, 255, 0.95);
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
    width: 100%;
    max-width: 450px;
    text-align: center;
    animation: fadeIn 0.8s ease-out;
}

.login-container button {
    width: 100%; /* Occupa tutta la larghezza del form */
    padding: 14px 20px; /* Aumenta l'altezza e lo spazio interno */
    margin-top: 20px; /* Aggiunge spazio sopra il pulsante */
    font-size: 1.2em; /* Ingrandisce la scritta "Accedi" */
    font-weight: 500; /* Rende il testo leggermente più marcato */
    background-color: #2A76B8; /* Un colore blu coerente con il titolo H1 */
    color: white;
    border: none;
    border-radius: 8px; /* Angoli arrotondati */
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
}

.login-container button:hover {
    background-color: #1a5c96; /* Un blu più scuro al passaggio del mouse */
    transform: translateY(-2px); /* Un leggero effetto di sollevamento */
}

/* Contenitore per la pagina principale (index) - CORRETTO */
.main-content-wrapper {
    position: relative;
    z-index: 1;
    width: 100%;
    max-width: 900px; /* Limite per non allargare troppo su schermi grandi */
    margin: 0 auto; /* Centra orizzontalmente */
    padding: 60px 20px; /* Spazio verticale e orizzontale */
    text-align: center;
    animation: fadeIn 0.8s ease-out;
    display: flex;
    flex-direction: column;
    gap: 25px;
    box-sizing: border-box;
}

/* Contenitore per i controlli in alto (logout, aiuto) */
.top-controls-wrapper {
    position: absolute;
    top: 20px;
    left: 20px;
    right: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: auto;
}

/* Footer per le informazioni di release */
.release-info {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background-color: #f8f9fa;
    color: #777;
    text-align: center;
    padding: 12px 0;
    font-size: 0.8em;
    border-top: 1px solid #e9ecef;
    z-index: 5;
}

/* ============================================= */
/* == 3. COMPONENTI COMUNI                    == */
/* ============================================= */

/* --- Contenitore dei pulsanti della dashboard --- */
.button-container {
    margin-bottom: 5px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
    width: 100%;
    max-width: 600px; /* Limite per i pulsanti */
    margin-left: auto;
    margin-right: auto;
}

/* Stile base per i pulsanti principali (quadrati) */
.button {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 15px 10px;
    text-align: center;
    text-decoration: none;
    color: white;
    border: none;
    border-radius: 5px;
    box-sizing: border-box;
    flex-basis: calc(50% - 7.5px);
    max-width: calc(50% - 7.5px);
    min-height: 100px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.button img {
    max-width: 45px;
    max-height: 45px;
    margin-bottom: 8px;
}

.button span {
    display: block;
    font-size: 1em;
    font-weight: 500;
    line-height: 1.2;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: inherit;
}

/* --- Gruppo: Inserimento Dati (Verdi/Azzurri) --- */
.insert-data-button { background-color: #2ecc71; }
.insert-data-button:hover { background-color: #27ae60; transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }

.insert-hours-button { background-color: #1abc9c; }
.insert-hours-button:hover { background-color: #16a085; transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }

.insert-orders-button { background-color: #e67e22; }
.insert-orders-button:hover { background-color: #d35400; transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }

.attendance-button { background-color: #3498db; }
.attendance-button:hover { background-color: #2980b9; transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }

/* --- Gruppo: Visualizzazione e Analisi (Viola/Blu Scuro) --- */
.commesse-button { background-color: #9b59b6; }
.commesse-button:hover { background-color: #8e44ad; transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }

.agile-view-button { background-color: #34495e; }
.agile-view-button:hover { background-color: #2c3e50; transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }

.orders-view-button { background-color: #2980b9; }
.orders-view-button:hover { background-color: #226b99; transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }

.dashboard-button { background-color: #8e44ad; }
.dashboard-button:hover { background-color: #7b3a96; transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }

/* --- Gruppo: Strumenti AI (Giallo/Arancione) --- */
.chat-ai-button { background-color: #f1c40f; }
.chat-ai-button:hover { background-color: #f39c12; transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }

.training-button { background-color: #e74c3c; }
.training-button:hover { background-color: #c0392b; transform: translateY(-3px); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }

/* --- Gruppo: Placeholder/Inattivi (Grigio) --- */
.placeholder-button { 
    background-color: #95a5a6;
    cursor: default;
    box-shadow: 0 5px 10px rgba(0,0,0,0.1);
}
.placeholder-button:hover { 
    background-color: #95a5a6;
    transform: none; /* No lift effect for placeholders */
}

/* --- Pulsanti secondari (logout, training, aiuto) --- */

.logout-button-horizontal {
    background-color: #ef9a9a;
    color: white;
    padding: 6px 10px;
    border-radius: 5px;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 5px;
    height: 30px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
    transition: background-color 0.3s ease, transform 0.2s ease;
}
.logout-button-horizontal:hover { background-color: #e57373; transform: translateY(-2px); box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); }
.logout-button-horizontal img { max-width: 18px; max-height: 18px; }
.logout-button-horizontal span { font-size: 0.8em; font-weight: 500; color: white; }

.training-button {
    background-color: #8c96a3;
    color: white;
    font-weight: 500;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    width: 100%; /* Occupa tutta la larghezza del contenitore */
    height: 60px;
    padding: 6px 10px;
    border-radius: 5px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
    transition: background-color 0.3s ease, transform 0.2s ease;
}
.training-button:hover { background-color: #7a8491; transform: translateY(-2px); box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); }
.training-button img { max-width: 24px; max-height: 24px; filter: invert(1); }

.help-button {
    background-color: #6c757d;
    color: white;
    border: none;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    font-size: 1.1em;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
    transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
}
.help-button:hover { background-color: #5a6268; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); }

/* --- Elementi Form --- */

.form-group {
    margin-bottom: 5px;
    text-align: left;
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    border: 1px solid #e9ecef;
}

.input-label-icon {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
}
.input-label-icon img { max-width: 24px; max-height: 24px; }
.input-label-icon h3 { font-size: 1.1em; color: #333; font-weight: 500; margin: 0; }

.form-group input[type="text"],
.form-group input[type="password"],
.form-group input[type="file"],
.form-group input[type="date"],
.form-group input[type="number"],
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #cccccc;
    border-radius: 6px;
    box-sizing: border-box;
    font-size: 1em;
    font-family: 'Roboto', sans-serif;
    color: #333333;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.form-group textarea {
    min-height: 80px;
    resize: vertical;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    border-color: #2A76B8;
    box-shadow: 0 0 0 3px rgba(42, 118, 184, 0.2);
    outline: none;
}

/* Controlli specifici per la registrazione vocale */
.voice-controls { display: flex; justify-content: center; gap: 15px; margin-top: 5px; }
.voice-controls button {
    padding: 10px 15px; border: 1px solid #ccc; border-radius: 6px; cursor: pointer;
    font-size: 1em; background-color: white; color: #333;
    transition: background-color 0.3s ease, transform 0.2s ease;
    display: flex; align-items: center; gap: 8px;
}
.voice-controls button:hover { background-color: #eee; transform: translateY(-1px); }
.voice-controls button img { max-width: 20px; max-height: 20px; }

#startButton { background-color: #d4edda; color: #155724; border-color: #c3e6cb; }
#startButton:hover { background-color: #c3e6cb; }
#stopButton { background-color: #f8d7da; color: #721c24; border-color: #f5c6cb; }
#stopButton:hover { background-color: #f5c6cb; }
#recordingStatus { font-size: 0.9em; color: #666; margin-top: 8px; margin-bottom: 12px; text-align: center; }

/* Pulsante Salva Dati (usato nei modali) */
.save-button {
    margin-top: 10px; padding: 15px 20px; border: none; border-radius: 8px;
    background-color: #28a745; color: white; font-size: 1.1em; font-weight: 500;
    cursor: pointer; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    transition: background-color 0.3s ease, transform 0.2s ease;
    display: block; width: 100%; box-sizing: border-box; text-align: center;
}
.save-button:hover { background-color: #1e7e34; transform: translateY(-2px); }

/* --- Legenda di Aiuto --- */
.legend {
    position: absolute; top: 70px; right: 20px; background-color: white;
    border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); z-index: 100;
    display: none; text-align: left; max-width: 350px;
}
.legend h3 { font-size: 1.3em; margin-bottom: 15px; border-bottom: 1px solid #eeeeee; padding-bottom: 10px; }
.legend-item { display: flex; align-items: center; gap: 10px; margin-bottom: 2px; }
.legend-icon { width: 35px; height: 35px; margin-right: 15px; display: flex; justify-content: center; align-items: center; flex-shrink: 0; }
.legend-icon img { max-width: 90%; max-height: 90%; }
.legend-text { font-size: 0.95em; color: #555; line-height: 1.4; }

/* --- Classi Modificatrici per i Colori dei Pulsanti --- */
.button.button--primary, .custom-modal-buttons .button--primary {
    background-color: #28a745;
    border-color: #218838;
    color: white;
}
.button.button--primary:hover, .custom-modal-buttons .button--primary:hover {
    background-color: #218838;
}

.button.button--secondary, .custom-modal-buttons .button--secondary {
    background-color: #007bff;
    border-color: #0069d9;
    color: white;
}
.button.button--secondary:hover, .custom-modal-buttons .button--secondary:hover {
    background-color: #0069d9;
}

/* ============================================= */
/* == 4. STILI PER I MODALI                   == */
/* ============================================= */

/* --- 4.1 Stili Generici per Tutti i Modali --- */

/* Overlay scuro per lo sfondo quando un modale è aperto */
.modal-overlay {
    display: none; position: fixed; top: 0; left: 0;
    width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 20;
}

/* Contenitore base del modale */
.modal {
    display: none; position: fixed; top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background-color: white; padding: 20px; border-radius: 10px;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25); z-index: 30;
    width: 95%; max-width: 600px; max-height: 90%;
    overflow-y: auto; animation: fadeInModal 0.3s ease-out;
    flex-direction: column;
}

/* Wrapper per il contenuto del modale, permette al body di espandersi */
.modal-content {
    display: flex; flex-direction: column; height: 100%;
}

/* Header del modale */
.modal-header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 15px; position: relative; flex-shrink: 0;
}
.modal-header h2 { margin: 0; font-size: 1.6em; text-align: center; letter-spacing: 1.5px; }

.modal-header-buttons {
    display: flex;
    align-items: center;
    gap: 10px; /* Spazio tra il pulsante '?' e 'X' */
}

/* Pulsante di chiusura del modale (X) */
.close-button {
    position: relative; font-size: 1.5em;
    background-color: #6c757d; color: white; border-radius: 50%;
    width: 35px; height: 35px; display: flex; justify-content: center;
    align-items: center; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: transform 0.2s ease, background-color 0.2s ease;
}
.close-button:hover { transform: rotate(90deg); background-color: #5a6268; }

/* Corpo del modale, contenitore dei form-group */
.modal-body {
    margin-bottom: 10px; display: flex; flex-direction: column;
    gap: 15px;
}

/* La legenda deve apparire sopra il modale */
#insertDataLegend, #chatLegend, #newOrderLegend {
    z-index: 40;
}

/* --- 4.2 Stili Specifici per Colore Header --- */

#insertDataModal .modal-header h2 { color: #28a745; }
#chatModal .modal-header h2 { color: #ffc107; }
#newOrderModal .modal-header h2 { color: #6f42c1; }
#searchModal .modal-header h2 { color: #dc3545; } /* Se esistesse */

/* --- 4.3 Stili Specifici: Chat Modal (#chatModal) --- */

/* Il corpo del modale chat deve espandersi per riempire lo spazio */
.chat-modal-body {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: 15px;
    padding-bottom: 0;
}

/* Area dei messaggi, scorrevole */
.chat-messages {
    flex-grow: 1;
    overflow-y: auto;
    padding-right: 10px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Singola bolla di messaggio */
.chat-message {
    display: flex;
    flex-direction: column; /* Impila testo e audio */
    max-width: 80%;
    align-items: flex-start; /* Allineamento base */
}

/* Allineamento a destra per i messaggi dell'utente */
.chat-message.user {
    align-self: flex-end;
    align-items: flex-end;
}

/* Allineamento a sinistra per i messaggi dell'AI */
.chat-message.ai {
    align-self: flex-start;
}

/* Contenuto testuale della bolla */
.message-content {
    padding: 10px 15px;
    border-radius: 18px;
    line-height: 1.4;
    word-wrap: break-word;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.chat-message.user .message-content { background-color: #dcf8c6; color: #000; }
.chat-message.ai .message-content { background-color: #f1f0f0; color: #000; }

/* Lettore audio dentro la bolla */
.audio-playback {
    margin-top: 8px;
    max-width: 100%;
}
.audio-playback audio {
    width: 100%;
    max-width: 280px;
    height: 40px;
    display: block;
}

/* Indicatore "sta scrivendo..." */
.typing-indicator {
    display: flex; align-items: center; padding: 10px 15px;
    background-color: #f1f0f0; border-radius: 18px;
    margin: 10px; width: fit-content;
}
.typing-indicator span {
    height: 8px; width: 8px; background-color: #8e8e8e;
    border-radius: 50%; display: inline-block; margin: 0 2px;
    animation: bounce 1.4s infinite ease-in-out both;
}
.typing-indicator span:nth-of-type(1) { animation-delay: -0.32s; }
.typing-indicator span:nth-of-type(2) { animation-delay: -0.16s; }
@keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }

/* Area di input in fondo alla chat */
.chat-input-area {
    display: flex; flex-direction: column; width: 100%;
    padding-top: 10px; border-top: 1px solid #eee; box-sizing: border-box;
}
#chatInput {
    width: 100%; min-height: 40px; max-height: 150px; padding: 10px 12px;
    border: 1px solid #ccc; border-radius: 20px; box-sizing: border-box;
    font-size: 1em; resize: none; overflow-y: auto; margin-bottom: 10px;
}

/* Pulsanti di invio e registrazione vocale */
.chat-controls { display: flex; justify-content: flex-end; gap: 10px; width: 100%; }
.chat-controls button {
    background-color: #2A76B8; color: white; border: none; border-radius: 50%;
    width: 45px; height: 45px; display: flex; justify-content: center; align-items: center;
    cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transition: background-color 0.3s ease, transform 0.2s ease;
    padding: 0;
}
.chat-controls button:hover { background-color: #1a5c96; transform: translateY(-1px); }
.chat-controls button img { width: 24px; height: 24px; }
.chat-voice-button.recording-active { background-color: #dc3545; }
.chat-voice-button.recording-active:hover { background-color: #c82333; }


/* ============================================= */
/* == 5. COMPONENTI SPECIFICI DI PAGINA       == */
/* ============================================= */

/* Box "Ultimi Inserimenti" nella pagina principale */
.latest-entries {
    padding: 20px;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    text-align: left;
    width: 100%;
    max-width: 600px; /* Stessa larghezza del container dei pulsanti */
    margin: 0 auto;
}
.latest-entries h2 {
    font-size: 1.4em; color: #333333; margin-top: 0;
    margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid #eeeeee;
}
#latestEntriesList { list-style: none; padding: 0; }
.entry-item {
    padding: 12px 0; border-bottom: 1px dashed #e0e0e0;
    font-size: 0.95em; color: #444;
}
.entry-item:last-child { border-bottom: none; }

/* ================================================================ */
/* == STILI MODALE INSERIMENTO ORE (Versione Definitiva 2.3)     == */
/* ================================================================ */

/* Modale più grande per contenere il nuovo layout */
.modal.large {
    width: 90vw;
    max-width: 1400px;
    max-height: 85vh;
    padding: 0; 
}

/* Il contenuto del modale ora gestisce il layout principale */
.modal.large .modal-content {
    padding: 20px;
    gap: 15px;
}

.modal.large .modal-header {
    padding: 0 20px;
    margin-bottom: 0;
}

/* NUOVO: Regola per colorare il titolo del modale */
#insertHoursModal .modal-header h2 {
    color: #ff7f50; /* Arancione, come il pulsante di attivazione */
}


/* Contenitore superiore che si divide in due colonne */
.modal-top-section {
    display: flex;
    gap: 20px; 
    border-bottom: 2px solid #f0f0f0;
    padding-bottom: 15px;
}

/* --- Pannello Sinistro: Lista Personale --- */
.personnel-list-container {
    flex: 1.5;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 10px;
    display: flex;
    flex-direction: column;
    background-color: #f8f9fa;
}
.personnel-list-container h4 {
    margin: 0 0 10px 0;
    padding-bottom: 10px;
    border-bottom: 1px solid #ddd;
    text-align: center;
}
#personnel-feedback-list {
    list-style: none;
    padding: 0 5px;
    margin: 0;
    overflow-y: auto; 
    column-count: 3;
    column-gap: 15px;
}
#personnel-feedback-list li {
    padding: 4px 6px;
    font-size: 0.9em;
    display: flex;
    justify-content: space-between;
    align-items: center;
    break-inside: avoid-column;
    margin-bottom: 4px;
}
#personnel-feedback-list li.inserted {
    color: #d9534f;
    font-weight: bold;
}
.entry-count-badge {
    background-color: #2A76B8;
    color: white;
    font-weight: bold;
    font-size: 0.8em;
    border-radius: 50%;
    width: 22px;
    height: 22px;
    display: flex;
    justify-content: center;
    align-items: center;
    visibility: hidden; 
    flex-shrink: 0;
    margin-left: 8px;
}
.entry-count-badge.visible {
    visibility: visible;
}

/* --- Pannello Destro: Form di Inserimento --- */
.insert-form-container-new {
    flex: 2;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}
.insert-form-container-new h4 {
    margin: 0 0 15px 0;
    text-align: center;
}

/* Griglia del form con il nuovo layout corretto */
.form-grid {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 15px;
}
.form-grid .form-group {
    margin: 0; padding: 0; background: none; border: none;
}
.form-grid label {
    font-size: 0.85em; font-weight: 500; margin-bottom: 5px; display: block;
}

/* Altezza uniforme per tutti i campi input */
.form-grid input, .form-grid select, .form-grid textarea {
    padding: 8px 10px;
    font-size: 0.9em;
    width: 100%;
    box-sizing: border-box;
    border: 1px solid #ccc;
    border-radius: 6px;
    height: 38px;
}
.form-grid textarea {
    resize: none;
    padding-top: 10px;
    padding-bottom: 10px;
    line-height: 1.3;
    /* MODIFICATO: Forza l'annullamento dell'altezza minima ereditata */
    min-height: 38px;
}

/* Posizionamento specifico per il layout richiesto */
.form-grid .form-group:nth-child(1) { grid-column: span 3; }
.form-grid .form-group:nth-child(2) { grid-column: span 6; }
.form-grid .form-group:nth-child(3) { grid-column: span 3; }
.form-grid .form-group:nth-child(4) { grid-column: span 12; }
.form-grid .form-group:nth-child(5) { grid-column: span 8; }
.form-grid .form-group:nth-child(6) { grid-column: span 4; }

.insert-form-container-new .save-button {
    padding: 10px;
    font-size: 1em;
}

/* Sezione Inferiore: Tabella Provvisoria */
.provisional-table-container-new {
    flex-grow: 1; 
    display: flex;
    flex-direction: column;
    /* MODIFICATO: Ridotta altezza minima per compattare il layout */
    min-height: 0px;
}
.table-wrapper {
    width: 100%; 
    flex-grow: 1;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
}
#provisional-table {
    width: 100%;
    table-layout: fixed;
    border-collapse: collapse;
}

/* 1. Colonna Giorno (stretta) */
#provisional-table th:nth-child(1) { width: 10%; }

/* 2. Colonna Operatore (media) */
#provisional-table th:nth-child(2) { width: 18%; }

/* 3. Colonna Ore (molto stretta) */
#provisional-table th:nth-child(3) { width: 8%; }

/* 4. Colonna Etichetta (larga) */
#provisional-table th:nth-child(4) { width: 26%; }

/* 5. Colonna Descrizione (larga) */
#provisional-table th:nth-child(5) { width: 26%; }

/* 6. Colonna Note (stretta) */
#provisional-table th:nth-child(6) { width: 10%; }

/* 7. Colonna Azione/Elimina (strettissima) */
#provisional-table th:nth-child(7) { width: 5%; }

#provisional-table thead {
    position: sticky; top: 0; z-index: 1; background-color: #f1f3f5;
}
#provisional-table th, #provisional-table td {
    padding: 10px 12px; text-align: left; border-bottom: 1px solid #dee2e6; font-size: 0.9em;
}
#provisional-table td {
    background-color: #fff;
    transition: background-color 0.2s ease;
}

/* NUOVO: Restringe l'ultima colonna (quella del pulsante elimina) */
#provisional-table tbody tr td:last-child {
    width: 1%;
    white-space: nowrap;
    text-align: center;
    padding: 0 8px; /* Padding laterale bilanciato */
}

.delete-row-btn {
    background: none;
    border: none;
    padding: 2px; /* Piccolo padding per aumentare l'area cliccabile */
    cursor: pointer;
    line-height: 0; /* Rimuove spazio extra sotto l'immagine */
}

.delete-row-btn img {
    /* Dimensione adattiva legata alla grandezza del testo (em) */
    width: 1.5em;
    height: 1.5em;
    vertical-align: middle; /* Allinea l'icona verticalmente al centro della riga */
}

/* --- Footer --- */
.modal.large .modal-footer {
    padding: 10px 20px 0 20px;
    margin-top: 0; 
    flex-shrink: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 2px solid #f0f0f0;
}

/* ================================================================ */
/* == STILI SPECIFICI: Colori Nuovi Pulsanti Gestione Ore        == */
/* ================================================================ */

/* Stile per i pulsanti disabilitati: mantiene il colore ma riduce l'opacità */
.button.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background-color: #95a5a6; /* Colore grigio di base se non specificato altrimenti */
}
/* Rimuove l'animazione di hover per i pulsanti disabilitati */
.button.disabled:hover {
    transform: none;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

/* Inserimento Ore - Verde (Azione Positiva) */
.insert-hours-button {
    background-color: #ff7f50; 
}
.insert-hours-button:hover {
    background-color: #ff8c00;
    transform: translateY(-3px);
}

/* Dashboard - Blu (Analisi) */
.dashboard-button {
    background-color: #3498db;
}
.dashboard-button:hover {
    background-color: #2980b9;
    transform: translateY(-3px);
}

/* Vista Agile - Grigio Ardesia (Strumento Avanzato) */
.manage-data-button {
    background-color: #4e6a85;
}
.manage-data-button:hover {
    background-color: #34495e;
    transform: translateY(-3px);
}

/* Ordini Produzione - Arancione (Produzione) */
.production-orders-button {
    background-color: #d35400;
}
.production-orders-button:hover {
    background-color: #e67e22;
    transform: translateY(-3px);
}

/* Presenze - Azzurro (Personale) */
.attendance-button {
    background-color: #bdb76b;
}
.attendance-button:hover {
    background-color: #b8860b;
    transform: translateY(-3px);
}

/* Pulsante Google Sheets - Verde Scuro (Colore del Brand) */
.google-sheets-button {
    background-color: #0F9D58;
}
.google-sheets-button:hover {
    background-color: #14B56A;
    transform: translateY(-3px);
}

/* Stile per il nuovo pulsante Vista Ordini */
.view-orders-button {
    background-color: #7f8c8d; /* Un grigio neutro */
}
.view-orders-button:hover {
    background-color: #95a5a6;
    transform: translateY(-3px);
}

/* ================================================================ */
/* == CORREZIONE DEFINITIVA: Stile Uniforme Pulsanti Legenda     == */
/* ================================================================ */

/* Regola principale per i pulsanti nella legenda */
.legend .button {
    /* --- Dimensioni Fisse e Reset --- */
    width: 120px;           /* Larghezza fissa e ridotta */
    height: 75px;           /* Altezza fissa e ridotta */
    min-height: unset;      /* ANNULLA l'altezza minima ereditata dal .button principale */
    flex-basis: auto;       /* ANNULLA la base flessibile ereditata */
    
    /* --- Spaziatura Interna Ridotta --- */
    padding: 8px;           /* ANNULLA il padding grande ereditato */
    
    /* --- Stili di Comportamento per la Legenda --- */
    margin-right: 20px;
    flex-shrink: 0;
    cursor: default;        /* Il cursore non deve cambiare */
    transform: none !important; /* Disabilita l'animazione di hover */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Ombra più piccola e fissa */
    opacity: 1 !important;  /* Forza l'opacità massima, anche per i pulsanti 'disabled' */
}

/* Regola per le ICONE all'interno dei pulsanti della legenda */
.legend .button img {
    width: 32px;            /* Dimensione icona ridotta */
    height: 32px;
    margin-bottom: 4px;     /* Spazio ridotto tra icona e testo */
}

/* Regola per il TESTO all'interno dei pulsanti della legenda */
.legend .button span {
    font-size: 0.75em;      /* Dimensione testo ridotta */
    line-height: 1.2;       /* Interlinea adatta al testo piccolo */
}

/* --- Override dei Colori (come prima, ma ora funzioneranno correttamente) --- */
.legend .insert-button { background-color: #27ae60; }
.legend .new-order-button { background-color: #8e44ad; }
.legend .chat-button { background-color: #f1c40f; }
.legend .google-sheets-button { background-color: #e74c3c; } /* Rosso corretto */
.legend .insert-hours-button { background-color: #e67e22; }
.legend .dashboard-button { background-color: #3498db; }
.legend .manage-data-button { background-color: #34495e; }
.legend .production-orders-button { background-color: #d35400; }
.legend .attendance-button { background-color: #16a085; }
.legend .future-button { background-color: #8e44ad; }
.legend .training-button { background-color: #e67e22; }

/* Assicura che il testo della legenda sia ben allineato */
.legend-text {
    flex-grow: 1;
}

/* Correzione per l'icona Addestramento nella legenda */
.legend .training-button {
    width: 35px;
    height: 35px;
    min-height: unset; /* Annulla l'altezza minima ereditata */
    padding: 5px;      /* Un po' di padding per l'icona interna */
    box-sizing: border-box; /* Assicura che il padding non aumenti le dimensioni */
}

/* ============================================= */
/* == 6. MEDIA QUERIES (RESPONSIVE DESIGN)    == */
/* ============================================= */

@media (max-width: 600px) {

    /* --- SOLUZIONE ALLO SCROLL ORIZZONTALE --- */
    body {
        overflow-x: hidden; /* Impedisce lo scroll orizzontale come sicurezza */
    }

    h1 { margin-top: 50px; font-size: 1.8em; }

    /* Adattamento del box di login per il mobile */
    .login-container {
        width: 90%; /* Occupa il 90% dello schermo invece di una larghezza fissa */
        padding: 30px 25px; /* Riduci il padding laterale e verticale */
        box-sizing: border-box; /* Assicura che il padding non causi overflow */
        margin: 0 auto;
    }

    .main-content-wrapper,
    .latest-entries {
        width: 100%;
        max-width: 100%; /* Forza gli elementi a non superare la larghezza dello schermo */
        box-sizing: border-box;
        padding-left: 15px;
        padding-right: 15px;
    }

    /* --- SOLUZIONE PER PULSANTE ADDESTRAMENTO E ALTRI PULSANTI --- */
    .button-container {
        flex-direction: column;
        gap: 12px;
    }
    /* Applichiamo le stesse regole di layout a tutti i pulsanti su mobile */
    .button, .training-button {
        width: 100%;
        max-width: 100%;
        flex-basis: auto;
        height: auto;
        min-height: 70px;
        padding: 15px;
        box-sizing: border-box;
    }

    /* --- SOLUZIONE PER MODALI E PULSANTI HEADER --- */
    .modal {
        width: calc(100% - 20px); /* Adatta alla larghezza schermo con 10px di margine per lato */
        max-width: 100%;
        padding: 15px;
        box-sizing: border-box;
    }
    
    .modal-header h2 {
        font-size: 1.4em;
    }

    /* Rendiamo i pulsanti di aiuto e chiusura della stessa dimensione */
    .help-button, .close-button {
        width: 32px;
        height: 32px;
        font-size: 1.1em;
        /* Rimuoviamo qualsiasi posizionamento che causa disallineamento */
        top: auto;
        right: auto;
    }

    .release-info { font-size: 0.7em; }

    /* Adattamenti generici per la chat modal su mobile */
    .chat-message { max-width: 90%; }
    .chat-input-area { padding: 5px 0 0; }
    #chatInput { margin-bottom: 8px; }
    .chat-controls button { width: 40px; height: 40px; }
    .chat-controls button img { width: 20px; height: 20px; }
}

/* ====================================================== */
/* == REGOLA CORRETTIVA PER INPUT FORM LOGIN           == */
/* ====================================================== */

/*
  Questa regola si applica specificamente ai campi email e password
  all'interno del login e garantisce che si espandano per tutta
  la larghezza disponibile.
*/
.login-container .form-group input[type="email"],
.login-container .form-group input[type="password"] {
    width: 100%;
    height: 42px;
    border: 1px solid #ccc;        /* Bordo grigio chiaro, solido e di 1px */
    border-radius: 5px;          /* Angoli leggermente arrotondati (più moderno) */
    padding: 0 10px;               /* Spaziatura interna per il testo */
    font-size: 1rem;               /* Dimensione del testo uniforme */
    box-sizing: border-box; /* Assicura che padding e border siano inclusi nella larghezza */
}

/* ================================================================ */
/* == 7. MEDIA QUERIES SPECIFICHE: MODALE INSERIMENTO ORE        == */
/* ================================================================ */

@media (max-width: 800px) { /* Breakpoint specifico per questo modale complesso */

    /* --- Ri-organizza la struttura principale del modale --- */
    #insertHoursModal .modal-top-section {
        flex-direction: column; /* I pannelli (lista e form) vanno uno sotto l'altro */
        height: auto; /* L'altezza diventa automatica */
    }

    /* 1. Nascondi la lista del personale su mobile */
    #insertHoursModal .personnel-list-container {
        display: none;
    }

    /* 2. Riorganizza il form a colonna singola */
    #insertHoursModal .form-grid {
        grid-template-columns: 1fr; /* Una sola colonna per tutti i campi */
        gap: 12px; /* Riduci lo spazio tra i campi */
    }
    
    /* Forza tutti i campi del form ad occupare l'intera larghezza */
    #insertHoursModal .form-grid .form-group:nth-child(n) {
        grid-column: span 1;
    }

    /* 3. Trasforma la tabella in una lista di "Card" */
    #insertHoursModal #provisional-table thead {
        display: none; /* Nascondi l'intestazione della tabella (Giorno, Operatore, etc.) */
    }

    #insertHoursModal #provisional-table,
    #insertHoursModal #provisional-table tbody,
    #insertHoursModal #provisional-table tr,
    #insertHoursModal #provisional-table td {
        display: block; /* Ogni elemento diventa un blocco a sé stante */
        width: 100% !important; /* Forza la larghezza piena */
        box-sizing: border-box;
    }

    /* Stile di ogni riga, che ora è una "Card" */
    #insertHoursModal #provisional-table tr {
        margin-bottom: 15px;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        overflow: hidden; /* Nasconde eventuali sbordature */
    }

    #insertHoursModal #provisional-table td {
        border: none;
        border-bottom: 1px dashed #eee;
        position: relative;
        padding: 8px 8px 8px 45%; /* Spazio a sinistra per l'etichetta */
        text-align: right; /* Allinea il valore a destra */
        min-height: 38px; /* Altezza minima per la cella */
        display: flex;
        align-items: center;
        justify-content: flex-end;
    }
    #insertHoursModal #provisional-table td:last-child {
        border-bottom: none; /* Rimuovi il bordo dall'ultima cella (quella del pulsante) */
    }

    /* Crea l'etichetta usando l'attributo 'data-label' che abbiamo aggiunto via JS */
    #insertHoursModal #provisional-table td:not(:last-child)::before {
        content: attr(data-label); /* Mostra il contenuto di data-label */
        position: absolute;
        left: 10px;
        width: 40%;
        font-weight: 500;
        color: #333;
        text-align: left;
    }

    /* Stile per la cella del pulsante Elimina */
    #insertHoursModal #provisional-table td:last-child {
        background-color: #f8f9fa;
        justify-content: center; /* Centra il pulsante */
        padding: 5px;
    }
}

/* ================================================================== */
/* == SISTEMA DI MODALI PERSONALIZZATO (PER CONFERME E ALERT)    == */
/* ================================================================== */

/* L'overlay per il modale di conferma.
   Deve avere uno z-index più alto dei modali normali per apparire sopra. */
#custom-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.65); /* Leggermente più scuro per dare risalto */
    z-index: 1000; /* Un valore molto alto per essere sicuri che sia in cima a tutto */
    
    /* La soluzione per il centraggio: usiamo Flexbox */
    display: flex;
    justify-content: center; /* Centra orizzontalmente */
    align-items: center;     /* Centra verticalmente */
}

/* Il box del modale vero e proprio */
.custom-modal {
    background-color: white;
    padding: 25px 30px;
    border-radius: 12px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    width: 90%;
    max-width: 450px;
    text-align: center;
    animation: fadeIn 0.3s ease-out; /* Applica un'animazione di comparsa */
}

/* Stili per il contenuto del modale (titolo, messaggio, pulsanti) */
.custom-modal h2 {
    margin-top: 0;
    font-size: 1.5em;
    color: #333;
}

.custom-modal p {
    margin-bottom: 25px;
    color: #555;
    line-height: 1.6;
    font-size: 1.05em;
}

.custom-modal-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
}

/* ================================================================== */
/* == COMPONENTI MODALI MODERNI (Stile Riutilizzabile)           == */
/* ================================================================== */

/* Migliora il body del modale per un layout più pulito */
.modal-body {
    padding-top: 10px;
    padding-bottom: 10px;
}

/* Footer del modale */
.modal-footer {
    padding: 10px 0 0 0;
    margin-top: 10px;
    border-top: 1px solid #f0f0f0;
}

/* --- Struttura delle Sezioni Interne --- */
.form-section {
    padding: 15px 0;
    /* Usa un bordo inferiore per separare le sezioni in modo leggero */
    border-bottom: 1px solid #f0f0f0;
}
/* Rimuovi il bordo dall'ultima sezione per un look più pulito */
.form-section:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.form-section-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 15px;
}

.form-section-header img {
    width: 24px;
    height: 24px;
    opacity: 0.7;
}

.form-section-header h3 {
    margin: 0;
    font-size: 1.1em;
    font-weight: 500;
    color: #333;
}

/* --- Stili per Elementi Form Moderni --- */

/* Input File Personalizzato */
.custom-file-upload {
    border: 2px dashed #e0e0e0;
    border-radius: 8px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    cursor: pointer;
    transition: border-color 0.3s ease, background-color 0.3s ease;
}
.custom-file-upload:hover {
    border-color: #2A76B8;
    background-color: #f8faff;
}
.custom-file-upload-icon {
    font-size: 2em;
    margin-bottom: 8px;
}
.file-name {
    font-size: 0.95em;
    color: #555;
    font-weight: 500;
}

/* Controlli Vocali Moderni */
.recording-status {
    text-align: center;
    font-size: 0.9em;
    color: #666;
    margin-bottom: 12px;
    min-height: 1.2em; /* Evita scatti nel layout al cambio di testo */
}

.voice-controls-modern {
    display: flex;
    justify-content: center;
    gap: 15px;
}
.voice-controls-modern button {
    padding: 10px 20px;
    border: 1px solid #ccc;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1em;
    background-color: white;
    color: #333;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 8px;
}
.voice-controls-modern button:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    border-color: #aaa;
}
.voice-controls-modern button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}
.voice-controls-modern img {
    width: 18px;
    height: 18px;
}

/* Stile specifico per il pulsante "Avvia" */
.voice-controls-modern #startButton {
    border-color: #28a745;
    color: #28a745;
}
.voice-controls-modern #startButton:hover:not(:disabled) {
    background-color: #28a745;
    color: white;
}

/* Stile specifico per il pulsante "Ferma" */
.voice-controls-modern #stopButton {
    border-color: #dc3545;
    color: #dc3545;
}
.voice-controls-modern #stopButton:hover:not(:disabled) {
    background-color: #dc3545;
    color: white;
}

/* Unifica lo stile di Textarea e Select */
.form-section textarea,
.form-section select {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #cccccc;
    border-radius: 8px;
    box-sizing: border-box;
    font-size: 1em;
    font-family: 'Roboto', sans-serif;
    color: #333333;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.form-section textarea {
    min-height: 120px;
    resize: vertical;
}
.form-section select {
}
.form-section textarea:focus,
.form-section select:focus {
    border-color: #2A76B8;
    box-shadow: 0 0 0 3px rgba(42, 118, 184, 0.2);
    outline: none;
}

/* Migliora il pulsante "Salva" principale */
.modal-footer .save-button {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    background-color: #2A76B8; /* Usa il colore primario del brand */
}
.modal-footer .save-button:hover {
    background-color: #1a5c96;
}
.modal-footer .save-button img {
    width: 20px;
    height: 20px;
    filter: invert(1); /* Rende l'icona bianca */
}

/* Stile per la versione compatta dell'area di upload */
.custom-file-upload.compact {
    padding: 10px; /* Riduce lo spazio interno */
    flex-direction: row; /* Mette icona e testo in riga */
    justify-content: flex-start;
    gap: 15px;
    border-style: solid; /* Usa una linea solida invece che tratteggiata */
}

.custom-file-upload.compact .custom-file-upload-icon {
    font-size: 1.5em; /* Rimpicciolisce l'icona */
    margin-bottom: 0;
}

/* Rende i campi di testo più visibili e con un font più grande */
.form-section input[type="text"],
.form-section input[type="number"] {
    font-size: 1.05em; /* Aumenta la dimensione del testo interno */
    font-weight: 500;
    color: #333;
    border: 1px solid #b0b0b0; /* Bordo leggermente più scuro */
    height: 45px;
    width: 100%;
    box-sizing: border-box;
    padding: 0 15px;
}

/* Aumenta la dimensione del testo del placeholder per coerenza */
.form-section input[type="text"]::placeholder,
.form-section input[type="number"]::placeholder {
    font-size: 1em; /* Assicura che il placeholder abbia la stessa dimensione */
    font-weight: 400;
    color: #999;
}

/* Riduce drasticamente l'altezza della textarea per la descrizione */
.form-section textarea#descrizione-commessa {
    min-height: 45px; /* Altezza minima di una riga */
    height: 45px;     /* Altezza fissa */
    resize: none;     /* Impedisce il ridimensionamento manuale */
    overflow: auto;   /* Mostra la scrollbar se il testo è più lungo */
}

/* NUOVO: Stile per la griglia dei campi aggiuntivi */
.additional-details-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* Due colonne di larghezza uguale */
    gap: 15px; /* Spazio tra i campi */
}

/* NUOVO: Griglia per affiancare i campi di testo */
.fields-grid {
    display: grid;
    grid-template-columns: 1fr 1fr; /* Due colonne di uguale larghezza */
    gap: 15px; /* Spazio tra le colonne */
}

/* MODIFICA: Rende in grassetto il testo inserito dall'utente */
.form-section input[type="text"],
.form-section input[type="number"] {
    font-size: 1.05em;
    font-weight: 700; /* Aumentato per un grassetto più marcato */
    color: #333;
    border: 1px solid #b0b0b0;
    height: 45px;
}

.form-fields-wrapper {
    display: flex;
    flex-direction: column;
    gap: 15px; /* <-- QUESTA è la regola chiave: imposta uno spazio di 15px tra ogni elemento */
}