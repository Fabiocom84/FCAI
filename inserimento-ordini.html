<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inserimento Ordini - Segretario AI</title>
    
    <!-- Stili Base -->
    <link rel="stylesheet" href="style-v2.css">
    <!-- Stili Specifici -->
    <link rel="stylesheet" href="inserimento-ordini.css">
    
    <!-- PDF.js (Libreria per leggere i PDF) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        // Configurazione worker PDF.js necessaria
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
</head>
<body class="orders-page">

    <div class="page-wrapper">
        <!-- HEADER (Uguale a Commesse) -->
        <header class="page-header">
            <a href="index.html" class="header-button">
                <img src="img/log-out.png" alt="Home" style="transform: rotate(180deg); filter: brightness(0) invert(1);">
                <span>Home</span>
            </a>
            <h1>Importazione Ordini</h1>
            <div style="width: 85px;"></div> <!-- Spaziatore per centrare titolo -->
        </header>

        <!-- AREA DRAG & DROP -->
        <div id="drop-zone" class="drop-zone">
            <div class="drop-content">
                <img src="img/production-order.png" alt="Upload" class="upload-icon">
                <h3>Trascina qui i file PDF degli Ordini</h3>
                <p>oppure</p>
                <button class="file-select-btn" onclick="document.getElementById('fileInput').click()">Seleziona File</button>
                <input type="file" id="fileInput" multiple accept=".pdf" hidden>
            </div>
            <div id="upload-spinner" class="spinner" style="display: none;"></div>
        </div>

        <!-- ANTEPRIMA DATI ESTRATTI (Nascosta inizialmente) -->
        <div id="preview-section" class="preview-section" style="display: none;">
            <div class="section-header">
                <h2>Anteprima Dati Rilevati</h2>
                <div class="actions">
                    <button id="clearBtn" class="button button--secondary">Pulisci</button>
                    <button id="confirmBtn" class="button button--primary">✅ Conferma e Salva</button>
                </div>
            </div>

            <div class="table-responsive">
                <table class="preview-table">
                    <thead>
                        <tr>
                            <th>Stato</th>
                            <th>Nr. Ordine (OP)</th>
                            <th>Commessa (VO)</th>
                            <th>Articolo</th>
                            <th>Descrizione</th>
                            <th>Q.tà</th>
                            <th>Note</th>
                        </tr>
                    </thead>
                    <tbody id="preview-body">
                        <!-- Qui finiranno le righe lette dal JS -->
                    </tbody>
                </table>
            </div>
        </div>

    </div>

    <!-- Modali Standard (Feedback, Errori) -->
    <div id="modalOverlay" class="modal-overlay" style="display: none;"></div>
    <div id="success-feedback-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="feedback-modal-title"></h2>
                <button class="close-button" onclick="closeSuccessFeedbackModal()">&times;</button>
            </div>
            <div class="modal-body feedback-body">
                <h3 id="feedback-modal-message"></h3>
            </div>
            <div class="modal-footer">
                <button onclick="closeSuccessFeedbackModal()" class="save-button">OK</button>
            </div>
        </div>
    </div>

    <!-- Script Moduli -->
    <script type="module" src="js/config.js"></script>
    <script type="module" src="js/auth-guard.js"></script>
    <script type="module" src="js/api-client.js"></script>
    <script type="module" src="js/shared-ui.js"></script>
    <!-- Logica Specifica -->
    <script type="module" src="js/inserimento-ordini.js"></script>

</body>
</html>